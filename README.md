# Water Controll & Weather Station

    แจกฟรี่!!! Source Code - ตู้ควบคุมน้ำ 4โซน 12VAC โซลินอยด์ วาล์ว เปิด-ปิด อัตโนมัติ ผ่านมือถือหรือกดที่หน้าตู้ แสดงสถานะอุณหภูมิ สภาพอากาศ
    ด้วยงบประมาณ 2500 บาท
    
#### ควบคุมผ่านหน้าตู้    
![image](https://user-images.githubusercontent.com/45023260/85195593-0bf0f700-b2fe-11ea-8aab-a24b979115f3.png)
    
![image](https://user-images.githubusercontent.com/45023260/85195033-718eb480-b2f9-11ea-97f6-b44b08f0f77e.jpg)
    
![image](https://user-images.githubusercontent.com/45023260/85195054-95ea9100-b2f9-11ea-84ea-e800943eb9bd.jpg)
    
#### ควบคุมผ่านมือถือ

ดูสถานะปัจจุบัน
![image](https://user-images.githubusercontent.com/45023260/85197428-1f568f00-b30b-11ea-93e7-cf30676d717d.png)

![image](https://user-images.githubusercontent.com/45023260/85197455-40b77b00-b30b-11ea-814a-c1fc10a0c461.png)
 
กดปุ่มเพื่อเปิดน้ำ
![image](https://user-images.githubusercontent.com/45023260/85197471-55940e80-b30b-11ea-9805-06a3a4083b60.png)

ปรับตั้งเวลา เลือกzone ที่จะให้ทำงาน
![image](https://user-images.githubusercontent.com/45023260/85197491-7492a080-b30b-11ea-8942-657acfdbb86e.png)

Auto Mode
![image](https://user-images.githubusercontent.com/45023260/85197498-8116f900-b30b-11ea-8621-9c1519148e1f.png)

![image](https://user-images.githubusercontent.com/45023260/85197507-9724b980-b30b-11ea-935c-2f4b58caf8fd.png)
    
 
#### Demo VDO

xxxxxx
    
#### เพื่อเป็นกำลังใจสามารถบริจาคเงิน ผ่านช่องทาง
1. TrueWallet
2. Paypal Donate
3. Bitcoin Address
    


## Equipment Lists
1. Esp32                  (1) 120 Bath
    https://th.aliexpress.com/item/32864722159.html?spm=a2g0s.9042311.0.0.27424c4d9Yzd3k
    ![image](https://user-images.githubusercontent.com/45023260/79830663-1bbc8f80-83d0-11ea-9492-b7a6209d60a1.png)
    
2. Relay 3V 4Channel      (1) 128 Bath
    https://shopee.co.th/product/117988183/2676926284
    
    ![image](https://user-images.githubusercontent.com/45023260/79830751-4870a700-83d0-11ea-98da-fbcd80382301.png)


3. Button Switch 12V 22mm     (4) 29 Bath/Piece
    https://shopee.co.th/product/129139583/2693310504
    ![image](https://user-images.githubusercontent.com/45023260/79830847-7950dc00-83d0-11ea-9894-2c1c5df8d657.png)
    
    
4. Lamp LED 22mm           (4)  13 Bath/Piece
    https://shopee.co.th/product/129139583/7112969459
    ![image](https://user-images.githubusercontent.com/45023260/79831042-da78af80-83d0-11ea-9a6b-fe69aa6c2906.png)


5. Power Source

    Option#1: Battery
      - Solarcell 60W 18V   (1)
      - Solar charge controller 10A-30A (1)
      - รางอนุกรมถ่าน 18650     (1) 45 Bath
      - Battery 18650         (4)  
      
    Option#2: Power Supply (Recommend)
      - Power Supply 12V 5A 60W (1) 120 Bath
      
      ![image](https://user-images.githubusercontent.com/45023260/79831343-6f7ba880-83d1-11ea-9802-6daa3b336ba5.png)
      
        
6. Wiring Cables
7. Prototype PCB ฺBoard 9*15 (1) 40 Bath
      https://shopee.co.th/product/137614635/5409264485
      ![image](https://user-images.githubusercontent.com/45023260/79831519-c5e8e700-83d1-11ea-9897-d8a24a397505.png)
      
8. Selector Switch 3 Position (1) 35 Bath
      https://shopee.co.th/product/129139583/2443988662
      ![image](https://user-images.githubusercontent.com/45023260/79833916-604b2980-83d6-11ea-859b-001cc1fabf9a.png)
      
9. Terminal Box 8P (2) 8 Bath/Piece
      https://shopee.co.th/product/129139583/5516149203
      
      ![image](https://user-images.githubusercontent.com/45023260/79834040-97213f80-83d6-11ea-8e26-13409fd62446.png)
      
10. หางปลา แฉกหุ้ม

      ![image](https://user-images.githubusercontent.com/45023260/79835604-2af40b00-83d9-11ea-899c-250e83e84650.png)
      
11. Controller Box 250x350x150  (1) 258 Bath
      https://shopee.co.th/product/74349884/1335588692
      ![image](https://user-images.githubusercontent.com/45023260/79835747-6bec1f80-83d9-11ea-89e6-18075669f41c.png)
      
12. TFT LCD Screen 3.2 นิ้ว (1) 230 Bath (Optional)
      https://th.aliexpress.com/item/32960934541.html?spm=a2g0s.9042311.0.0.27424c4d8HFc1r
      
      ![image](https://user-images.githubusercontent.com/45023260/79835814-8b834800-83d9-11ea-9e65-d23cb68b92e3.png)
      
13. PCB Pin Female
      https://th.aliexpress.com/item/32724478308.html?spm=a2g0s.9042311.0.0.27424c4d9Yzd3k
      ![image](https://user-images.githubusercontent.com/45023260/79547143-b578f980-80bd-11ea-8824-3844270ea216.png)
      
14. AC Breaker 2 Pole 16A   80 Bath
https://shopee.co.th/product/44027329/7019724275
![image](https://user-images.githubusercontent.com/45023260/81255358-a7345280-9057-11ea-9ebd-95801527f132.png)

15. AC Surge Protection     160 Bath
https://shopee.co.th/product/129139583/2819545657
![image](https://user-images.githubusercontent.com/45023260/81781796-f3353a80-9522-11ea-9754-77024efe0832.png)
      
16. รางปีกนก ยาว 10 CM
https://shopee.co.th/product/129139583/2801392100
![image](https://user-images.githubusercontent.com/45023260/81782825-99ce0b00-9524-11ea-9958-2b67610ac24e.png)

17. Solenoid Valve 12V DC ขนาด 3/4 370Bath

https://www.lazada.co.th//products/i342828145-s1270160743.html?spm=a2o4m.cart.0.0.67e36108TTw68Z&urlFlag=true

![image](https://user-images.githubusercontent.com/45023260/84752110-89a7c080-afe7-11ea-94a1-99740b29832c.png)
##### Tools

    - คีมปลอกสายไฟ (1)  134 บาท
      https://shopee.co.th/product/37738200/1250808467
    - ชุดบัดกรีสายไฟ
    - ดอกสว่่าน hole saw สำหรับเจาะรู 22mm
    - สว่าน
    


## Installation Steps
#### 1.Download Source Code
        - Download Source Code files from github
        - Extract files into folder
![image](https://user-images.githubusercontent.com/45023260/81256732-91289100-905b-11ea-8010-17459bbc5f4a.png)
#### 2.Download & Install Arduino IDE
        - Download & Install the lasest Arduino IDE software via this link
        https://www.arduino.cc/en/Main/Software
![image](https://user-images.githubusercontent.com/45023260/81255794-d1d2db00-9058-11ea-908c-cf33c9d068b2.png)
#### 3.Install Blynk Moblie Application & Register
        - If using IOS find application "Blynk" on App Store
        - If using Android find application "Blynk" on Google Store
![image](https://user-images.githubusercontent.com/45023260/81262941-f46cf000-9068-11ea-8df5-78fcd06fcc50.png)
        - Register
            - Create Own Account
![image](https://user-images.githubusercontent.com/45023260/81265728-c4741b80-906d-11ea-86af-ef76868097eb.png)
1. Click "Create New Account"
2. Custom Server Settings
3. Input Server:"blynk.iot-cm.com" Port:"9443"
4. Fill your email & set up your password
    - Then your auth token will be sent to your register email
            
#### 4.Openweather Register
        - Open to this website "https://openweathermap.org/"
        - Sign up
        - After sing in, go to API keys tab
![image](https://user-images.githubusercontent.com/45023260/81267643-ffc41980-9070-11ea-8169-473b51ffb319.png)
#### 5.Edit Source Code Parameter
##### Wifi Parameter
- Open File "weather-station/main/config.h
- Change ssid & pass to your wifi
![image](https://user-images.githubusercontent.com/45023260/81363853-7d8a3280-910e-11ea-9fe4-d35d06f61b36.png)

##### Tftlcd
- If you want to use Tftlcd keep it default. But if you don't want to use Tftlcd, you must comment code.
![image](https://user-images.githubusercontent.com/45023260/81364163-36507180-910f-11ea-970f-bbe4ab25154f.png)

##### Edit NTP Time Zone
- If your location stay at asia keep parameter as default
![image](https://user-images.githubusercontent.com/45023260/81365097-70bb0e00-9111-11ea-8574-e41550863982.png)

- If your location is not asia, you can adjust parameter following by this reference "https://www.ntppool.org/en/"

##### Blynk
#define BLYNKLOCAL
![image](https://user-images.githubusercontent.com/45023260/81366674-7155a380-9115-11ea-9820-89daf6bdbd89.png)

input your Blynk api key
![image](https://user-images.githubusercontent.com/45023260/81366985-3011c380-9116-11ea-95ea-8ab7767afdbe.png)

##### Openweather
- input your openweather api key
- input your weather-station latitude & longitude
![image](https://user-images.githubusercontent.com/45023260/81367457-7fa4bf00-9117-11ea-84a6-ba77622ac40c.png)

#### 6.Complie Source Code & Install to Arduino Board
When finnish step#5 complie source code by Arduino IDE software then upload complied code to your arduino Board

#### 7.Integrate Hardware
        Wiring Diagram
        Connect Cable
        
        ### Coming Soon ###
        
#### 8.Moblie Application Setup (Optional)
       Install Blynk App (If done: skip this step)
       Login with registered user
       Scan QR Code
       Start
       Run & Test
        
       ### Coming Soon ###
